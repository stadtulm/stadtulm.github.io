





<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="lt-ie9">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]-->
<head>
  <!-- Basic Page Needs
    ================================================== -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="robots" content="noindex, nofollow">
  <!-- Mobile Specific Metas
    ================================================== -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Title and meta description
    ================================================== -->
  <title>ulm development</title>
  <meta property="og:title" content="ulm development">
  <meta name="description" content="build things, create stuff inside the city of ulm.">
  <meta property="og:description" content="build things, create stuff inside the city of ulm.">

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@ulm_donau" />
  <meta name="twitter:title" content="ulm development" />
  <meta name="twitter:description" content="build things, create stuff inside the city of ulm." />

  <meta property="og:type" content="article">
  <link rel="canonical" href="/">
  <meta property="og:url" content="/">
  <!-- Favicons
    ================================================== -->
  <!-- 128x128 -->
  <link rel="shortcut icon" type="image/ico" href="/assets/images/favicons/favicon.ico">
  <link rel="icon" type="image/png" href="/assets/images/favicons/favicon.png">
  <!-- 192x192, as recommended for Android
    http://updates.html5rocks.com/2014/11/Support-for-theme-color-in-Chrome-39-for-Android
    -->
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/favicons/android-chrome-192x192.png">
  <!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
  <link rel="apple-touch-icon-precomposed" href="/assets/images/favicons/favicon-57.png">
  <!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/favicons/favicon-72.png">
  <!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/favicons/favicon-114.png">
  <!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/images/favicons/favicon-144.png">
  <!-- CSS
    ================================================== -->
  <!-- env: demo -->
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body class="page-landing-page layout-demo ">
  <a class="usa-skipnav" href="#main-content">Skip to main content</a>
  <div class="usa-overlay"></div>


<header class="usa-header usa-header--basic" role="banner">
  <div class="usa-nav-container">
    <div class="usa-navbar">
      <div class="usa-logo" id="extended-logo">
        <a href="/" title="Home" aria-label="Home">
          <img class="logo-img" src="/assets/images/logo.png" alt="ulm">
          <em class="usa-logo__text">ulm development</em>
        </a>
      </div>
      <button class="usa-menu-btn">Menu</button>
    </div>
    <nav role="navigation" class="usa-nav">
      <button class="usa-nav__close"><img src="/assets/uswds/img/close.svg" alt="close"></button>
      <ul class="usa-nav__primary usa-accordion">
        
        
        
        
        <li class="usa-nav__primary-item">
          <a class="usa-nav__link" href="/"><span>Home</span></a>
        </li>
        
        
        
        
        <li class="usa-nav__primary-item">
          <button class="usa-accordion__button usa-nav__link" aria-expanded="false" aria-controls="primary-nav-2"><span>Projekte</span></button>
          <ul id="primary-nav-2" class="usa-nav__submenu">
            
            <li class="usa-nav__submenu-item">
              <a href="/projects/openbike/">OpenBike</a>
            </li>
            
            <li class="usa-nav__submenu-item">
              <a href="/projects/digitransit/">digitransit</a>
            </li>
            
          </ul>
        </li>
        
        
        
        
        
        <li class="usa-nav__primary-item">
          <a class="usa-nav__link" href="/blog/"><span>Blog</span></a>
        </li>
        
        
      </ul>
    </nav>
  </div>
</header>

<main class="usa-layout-docs usa-section" id="main-content">
  <div class="grid-container">
    


<div class="grid-row grid-gap">
  <div class="desktop:grid-col-8 usa-prose padding-right-4">
    <h1 class="title">Wifi-Tracker bauen</h1>
    <div class="text-base margin-bottom-2">
        <div class="margin-top-neg-105">
          von <span class="text-bold">Constantin Müller</span> · 24. April 2020
        </div>
    </div>
    <div>
    	<p>Wir hatten <a href="/2020/01/13/trackinghardware/">im Januar schon einmal beschrieben</a>, dass wir auch selbst entwickelte Wifi-Tracker zur Positionsbstimmung benutzen. Das <a href="https://github.com/stadtulm/Lora-Wifi-Location-Tracker/blob/master/hardware/README.md">Hardwaredesign</a> und die <a href="https://github.com/stadtulm/Lora-Wifi-Location-Tracker">Firmware</a>, welche wir dafür entwickelt haben ist natürlich als OpenSource bzw. OpenHardware auf GitHub verfügbar.</p>

<p>Allerdings ist es sicher auch interessant, wie genau wir die Tracker momentan einsetzen. Theoretisch funktioniert die Platine ja einfach, wenn man sie zusammen baut, aber irgendwie muss sie ja auch ans Fahrrad und mit Strom versorgt werden. Wie wir das aktuell umsetzen, beschreiben wir hier.</p>

<h2 id="flashen">Flashen</h2>

<p><img src="/assets/images/blog/20200423-wifi-tracker/ESP-12F-flashtool.jpg" alt="" /></p>

<p>In dem Hardwaredesign sind Kontakte für Datentransfer und Buttons für Flash und Reset vorgesehen, um die Firmware auf dem fertig gelötetem Board aufzuspielen. Allerdings flashen wir die Firmware schon vor dem Auflöten mit einem <a href="https://de.aliexpress.com/wholesale?SearchText=burner+esp12">testboard programmer</a> auf das ESP12-Modul. Zum einen vermeidet man dadurch, bei vielen Platinen immer wieder Kontaktkabel an und wieder abzulöten, andererseits kann man auch so die Buttons weg lassen, was im Zweifel zusätzlich nochmal Platz spart.</p>

<h2 id="zusammenlöten">Zusammenlöten</h2>

<p><img src="/assets/images/blog/20200423-wifi-tracker/ESP-und-RFM-loeten.jpg" alt="" /></p>

<p>Beim Zusammenlöten starten wir mit dem ESP12-Modul. Es empfiehlt sich dieses zum Löten mit einer <a href="https://de.wikipedia.org/wiki/Dritte_Hand">dritten Hand</a> oder einer Klemme an der Platine in der richtigen Kontaktposition zu fixieren. Danach das Gleiche noch mal mit dem RFM-96 LoRa-Modul.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/platine-backside.jpg" alt="" /></p>

<p>Sind diese beiden Bauteile angelötet, kommen die Kleinteile auf der Rückseite dran. Dabei sind eigentlich nur die fünf <code class="highlighter-rouge">10k</code>-Widerstände und der <code class="highlighter-rouge">100uF</code>-Kondensator relevant. Die <code class="highlighter-rouge">1k</code>-Widerstände sind nur nötig, wenn die serielle Schnittstelle zum Flashen oder Debuggen benutzt werden soll. Die <code class="highlighter-rouge">100k</code>- und <code class="highlighter-rouge">680k</code>-Widerstände waren ursprünglich zum Messen der Spannung gedacht, verbrauchen ohne weitere Hardwaremodifikation  aber zusätzlich Strom im Schlafzustand und werden deswegen momentan auch von der Firmware nicht unterstützt. Dieses Problem wollen wir in zukünftigen Hardwareversionen aber lösen, da die Information zum Batteriezustand im Betrieb durchaus wichtig ist. Den Spannungsregler <code class="highlighter-rouge">AMS111733</code> können wir in unserem Fall auch komplett weg lassen, da wir den Tracker mit zwei AA Batterien betreiben, welche die gewünschte Spannung schon von Haus aus liefern.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/antenne.jpg" alt="" /></p>

<p>An dem Antennen-Pin vom RFM sollte noch ein Kabel als Antenne angelötet werden. Dieses kann dann später nach dem Einbau gekürzt werden. Billige Spiralantennen haben sich bei uns als schwer zu löten und nicht sehr effektiv herausgestellt. Das kann aber bei anderen Antennen durchaus anders sein.</p>

<h2 id="gehäuse">Gehäuse</h2>

<p><img src="/assets/images/blog/20200423-wifi-tracker/gehaeuse-original.jpg" alt="" /></p>

<p>Nach langem Experimentieren und langer Suche nach einem günstigen Gehäuse, welches den Tracker und die Batterien platzsparend fassen kann, haben wir uns für ein modifiziertes 3×AA Batteriegehäuse entschieden. Die Verkabelung im Gehäuse wird so modifiziert, dass nur zwei Batterien genutzt werden. Im dritten Fach findet dann der Tracker seinen Platz.</p>

<p>Von diesen Gehäusen gibt es leicht abweichende Ausführungen, die Verkabelung ist aber in der Regel immer gleich. Preislich liegen die Gehäuse bei AliExpress je nach Menge und Umrechnungskurs bei etwa 40-70 Cent.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/abdeckung-offen.jpg" alt="" /></p>

<p>Als erster Schritt wird die Abdeckung über dem Schalter gelöst (manchmal geschraubt, manchmal gesteckt). Dadurch kann der Schalter zusammen mit dem schwarzen Kabel und der Spirale nach oben raus gezogen werden.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/kabel-nach-oben-biegen.jpg" alt="" /></p>

<p>Im nächsten Schritt kann das rote Kabel bis zum Metallplättchen heraus gezogen, und das Kabel nach oben gebogen werden.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/schwarzes-kabel-anloeten.jpg" alt="" /></p>

<p>Als Nächstes muss der Doppelkontakt nach oben aus der Halterung gezogen werden. An die Seite ohne Feder kann nun ein Kabel angelötet werden. (Ich verwende da immer ein Stück des vorher gezogenen schwarzen Kabels.)</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/verbindung-anloeten.jpg" alt="" /></p>

<p>Danach müssen die beiden Kabel nur noch so eingekürzt werden, dass sie bequem an die Platine gelötet werden können. Zum Abschätzen des Abstandes empfiehlt es sich, die Platine schon mal in die endgültige Stelle einzulegen. Das rote Kabel wird nun an den <code class="highlighter-rouge">3V</code> Kontakt gelötet und das schwarze auf <code class="highlighter-rouge">GND</code>.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/beschriftet-und-batterien.jpg" alt="" /></p>

<p>Außerdem beschriften wir die Platinen noch mit einer Kurzform der TTN-Device-ID, welche wir vorher in der Firmware konfiguriert haben, damit es später keine Verwechslungen gibt. Nun können die Batterien rein und der Deckel drauf. Falls die Platine beim Schütteln klappert, kann noch ein bisschen Füllmaterial ins Gehäuse geklemmt werden.</p>

<h2 id="verkleben">Verkleben</h2>

<p><img src="/assets/images/blog/20200423-wifi-tracker/zugeklebt.jpg" alt="" /></p>

<p>Jetzt kommen wir zum unausgereiftesten Teil des ganzen: Das Gehäuse ist alles andere als wasserdicht. Deswegen haben wir es einfach mit ordentlich Gaffa verklebt. Dabei unbedingt auf die Ecken achten. Das ganze ist dann leider beim Batterien tauschen etwas unbequem, da das alles wieder aufgeschnitten werden muss. Bei uns halten die Batterien aber so etwa 3 bis 4 Monate.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/kondenzwasser1.jpg" alt="" /></p>

<p>Bis jetzt hatten wir noch keine Fälle in denen nennenswert Wasser rein geflossen wäre, wie wir das bei den Abzweigdosen für die GPS-Tracker schon erlebt haben. Allerdings hatten wir jetzt schon Fälle, in denen sich Korrosion gebildet hat und sich Kondenswasser abgesetzt hat. Hier könnte vielleicht ein kleiner Beutel Silica-Gel nicht schaden. Über Vorschläge und Ideen zur besseren Abdichtung freuen wir uns immer.</p>

<p><img src="/assets/images/blog/20200423-wifi-tracker/kondenzwasser2.jpg" alt="" /></p>

<h2 id="klett">Klett</h2>

<p><img src="/assets/images/blog/20200423-wifi-tracker/klett.jpg" alt="" /></p>

<p>Nach dem Verkleben werden auf einer Seite noch zwei Streifen Hakenklett angeklebt. Auf der Innenseite der Beschriftungsplatten unserer Fahrräder befinden sich auch zwei Flauschklettstreifen - und da wird der Tracker dann einfach angeklettet. Das hält! Außerdem sollte auch außen auf den Tracker noch einmal die Tracker-ID drauf geschrieben werden.</p>

<h2 id="mitentwickeln">Mitentwickeln</h2>

<p>Für alle, die Interesse haben sich auch einen Wifi-only Geolocation-Tracker zu bauen, hätten wir auch noch ein paar unbestückte Platinen, die wir gern verschicken können. Schickt uns dafür einfach eine Mail an openbike@ulm.dev</p>


    </div>
  </div>
  <aside class="desktop:grid-col-fill margin-top-4 padding-right-4">
      <div class="border-top-1 border-accent-cool-darker padding-top-2 margin-bottom-4 usa-prose">
        <h4 class="">Neuste Beiträge</h4>
        <ul class="usa-list usa-list--unstyled padding-top-2">
          
          <li class="padding-bottom-1"><a class="usa-link" href="/2021/09/03/ixsi-gbfs-converter/">Converter von IXSI nach GBFS für Carsharing</a></li>
          
          <li class="padding-bottom-1"><a class="usa-link" href="/2020/09/25/lora-tracker-konfigurieren/">LoraWAN GPS-Tracker konfigurieren</a></li>
          
          <li class="padding-bottom-1"><a class="usa-link" href="/2020/07/07/openbike_rueckgabe_benachrichtigungen_auth/">Gedanken zur Fahrradrückgabe, Benachrichtigungen und Authentifizierung</a></li>
          
          <li class="padding-bottom-1"><a class="usa-link" href="/2020/06/30/minikonferenz/">Save the date: Eine kleine OpenBike-Konferenz</a></li>
          
          <li class="padding-bottom-1"><a class="usa-link" href="/2020/06/25/openbike-qa-1-kurzbericht/">OpenBike Q&A, ein nachgereichter Blogpost</a></li>
          
        </ul>
      </div>
      <div class="border-top-1 border-accent-cool-darker padding-top-2 margin-bottom-4 usa-prose">
        <h4>Links</h4>
        <ul class="usa-list usa-list--unstyled padding-top-2">
          <li class="padding-bottom-1">
            <svg style="vertical-align: middle;" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16 text-primary width-2 margin-right-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
              <path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>
            </svg>
            <a class="usa-link" href="https://github.com/stadtulm">Github</a>
          </li>
          <li class="padding-bottom-1">
            <svg style="vertical-align: middle;" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14 text-primary width-2 margin-right-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path>
            </svg>
            <a class="usa-link" href="/feed.xml">RSS Feed</a>
          </li>
        </ul>
      </div>
    </aside>
</div>


  </div>
</main>

<footer class="usa-footer site-footer" role="contentinfo">
  <div class="footer-section-bottom bg-base-lighter">
    <div class="grid-container">
      <div class="grid-row padding-3">
        <div class="tablet:grid-col" >
          <div class="logo-links">
            <a class="footer-logo media_link" href="https://www.ulm.de/leben-in-ulm/digitale-stadt">
              <img src="/assets/images/zda-logo.svg" width="100" alt="Stadt Ulm, Z/DA" />
            </a>
          </div>
        </div>
        <div class="tablet:grid-col"></div>
        <div class="tablet:grid-col">
          <ul class="add-list-reset">
            <li><a href="https://www.ulm.de/leben-in-ulm/digitale-stadt">Digitale Agenda</a></li>
            <li><a href="https://github.com/stadtulm">GitHub</a></li>
          </ul>
        </div>
        <div class="tablet:grid-col">
          <ul class="add-list-reset">
            <li><a href="https://www.ulm.de/sonderseiten/datenschutzerklaerung">Datenschutz</a></li>
            <li><a href="https://www.ulm.de/sonderseiten/impressum">Impressum</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="/assets/uswds/js/uswds.min.js"></script>

</body>
</html>
